{% extends 'base.html' %}
{% load custom_filters %}
{% load static %}

{% block content %}
    <br>
    <h3>{{ page_title }}</h3>
    <br>
    <!--  COLLAPSIBLE LVL 1  -->
    {% for cat1 in index %}
        <h5><b class="hover-blue cat1" data-toggle="collapse" data-target="#{{ cat1.name }}">{{ cat1.name }}</b></h5>
        <div id="{{ cat1.name }}" class="panel-collapse collapse">
            
            <!--  COLLAPSIBLE LVL 2  -->
            {% for cat2 in index|dict_lookup:cat1 %}
                {% if cat2.name != '---' %}
                    <h6 class="indent-2"><b class="hover-blue cat2" data-toggle="collapse" data-target="#{{ cat2.name }}">{{ cat2.name }}</b></h6>
                    <div id="{{ cat2.name }}" class="panel-collapse collapse in">
                        
                        <!--  COLLAPSIBLE LVL 3  -->
                        {% for cat3 in index|dict_lookup:cat1|dict_lookup:cat2 %}
                            {% if cat3.name != '---' %}
                                <h6 class="indent-3"><b class="hover-blue" data-toggle="collapse" data-target="#{{ cat3.name }}">{{ cat3.name }}</b></h6>
                                <div id="{{ cat3.name }}" class="panel-collapse collapse in">
                                    <div class="panel-body">
                                        <ul>
                                        {% for result in index|dict_lookup:cat1|dict_lookup:cat2|dict_lookup:cat3 %}
                                            <li class="description-3">
                                                {{ result.description|safe }}
                                                {% if result.annotation %}
                                                    <b class="hover-blue" data-toggle="collapse" data-target="#{{ result.id }}">UWAGI</b>
                                                    <div id="{{ result.id }}" class="panel-collapse collapse"><small>[{{ result.annotation }}]</small></div>
                                                {% endif %}
                                            </li>
                                        {% endfor %}
                                        </ul>
                                        <br>
                                    </div>
                                </div>
                                
                            <!--  IF NO COLLAPSIBLE AT LVL 3  -->
                            {% else %}
                                <ul>
                                {% for result in index|dict_lookup:cat1|dict_lookup:cat2|dict_lookup:cat3 %}
                                    <li class="description-2">
                                        {{ result.description|safe }}
                                        {% if result.annotation %}
                                            <b class="hover-blue" data-toggle="collapse" data-target="#{{ result.id }}">UWAGI</b>
                                            <div id="{{ result.id }}" class="panel-collapse collapse"><small>[{{ result.annotation }}]</small></div>
                                        {% endif %}
                                    </li>
                                {% endfor %}
                                </ul>
                                <br>
                            {% endif %}
                        
                        {% endfor %}
                        {% if index|dict_lookup:cat1|dict_lookup:cat2|length > 1 %}<br>{% endif %}
                    </div>
                    
                <!--  IF NO COLLAPSIBLE AT LVL 2  -->
                {% else %}
                    {% for cat3 in index|dict_lookup:cat1|dict_lookup:cat2 %}
                        {% if cat3.name != '---' %}<h6><b>{{ cat3.name }}</b></h6>{% endif %}
                            <ul>
                            {% for result in index|dict_lookup:cat1|dict_lookup:cat2|dict_lookup:cat3 %}
                                <li class="description-1">
                                    {{ result.description|safe }}
                                    {% if result.annotation %}
                                        <b class="hover-blue" data-toggle="collapse" data-target="#{{ result.id }}">UWAGI</b>
                                        <div id="{{ result.id }}" class="panel-collapse collapse"><small>[{{ result.annotation }}]</small></div>
                                    {% endif %}
                                </li>
                            {% endfor %}
                            </ul>
                    {% endfor %}
                    <br>
                {% endif %}
                
            {% endfor %}
            <br>
        </div>
    {% endfor %}

{% endblock content %}

