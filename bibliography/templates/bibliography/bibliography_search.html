{% extends 'base.html' %}
{% load static %}

{% block content %}
    <div class="content-section">

        <form method="GET" action="">
            <h2>Wyszukiwanie tekstowe</h2>
            <br>
            <!--  COL 1   -->
            <input type="text" name="search1" placeholder="Szukane słowo/fraza" value="{{ request.GET.search1 }}" required/>
            <select id="option1" name="option1">
                <option value="all">Pełny opis</option>
                <option value="author">Autor</option>
                <option value="title">Tytuł</option>
                <option value="year">Rok wydania</option>
            </select>
            
            <br><br>
            <label>Operator logiczny:</label>
            <select id="operator" name="operator">
                <option value="none">---</option>
                <option value="and">AND</option>
                <option value="or">OR</option>
                <option value="not">AND NOT</option>
            </select>
            <br><br>
            
            <input type="text" name="search2" placeholder="Szukane słowo/fraza" value="{{ request.GET.search2 }}"/>
            <select id="option2" name="option2">
                <option value="all">Pełny opis</option>
                <option value="author">Autor</option>
                <option value="title">Tytuł</option>
                <option value="year">Rok wydania</option>
            </select>
            <br><br><br>
            
            <input type="checkbox" name="is_categories" value="True"> Wyszukaj jedynie w wybranych kategoriach:<br>
            <br>
            <select name="categories" size ="15" multiple>
                {% for cat3 in categories3 %}
                    <option value="{{ cat3 }}">{{ cat3 }}</option>
                {% endfor %}
            </select>
            <br>
            <small>Aby wybrać wiele opcji przytrzymaj na klawiaturze Ctrl (Windows) / Command (Mac).</small>
            
            <br><br>
            <br><br>
            <button class="btn btn-dark" type="submit">Wyszukaj</button>
            <a href="{% url 'bibliography:search' %}" class="btn btn-dark text-right">Nowe wyszukiwanie</a>
        </form>

        
    </div>
    
    <br><br>
    {% if is_searching %}
        <h2>Kwerenda:</h2>
        <small> {{ query_text|safe|linebreaksbr }}</small>
        <br><br><br>
        {% if is_valid_search %}
            <h2>Wyniki:</h2>
            <br>
            {% if results %}
                {% for result in results %}
                    <li class="description">{{ result.description|safe }}</li>
                {% endfor %}
            {% else %}
                <p>Brak pozycji spełniających wybrane kryteria wyszukiwania.</p>
            {% endif %}
        {% endif %}
    {% endif %}
    <br>
    {{ descriptions_1_2 }}<br><br>
    {{ descriptions_3_4 }}
{% endblock content %}

